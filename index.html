<!DOCTYPE html>
<html>
  <body>
    <input id="userName" /><button>ユーザ名登録</button>
  </body>
  <script>
    fetch("/treasure_location").then(response=>response.json()).then(data=>{
      const {latitude, longitude} = data;
      localStorage.setItem("treasure_latitude", latitude);
      localStorage.setItem("treasure_longitude", longitude);
    });
    const button = document.querySelector("button");
    localStorage.clear();
    button.addEventListener("click", () => {
      const input = document.getElementById("userName");
      if (!input.value) {
        alert("ユーザ名を入力してください");
        return;
      }
      localStorage.setItem("userName", input.value);
      window.location.href = "/chat";
    });
  </script>
</html>
